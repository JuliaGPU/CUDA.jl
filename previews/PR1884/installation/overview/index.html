<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Overview · CUDA.jl</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-154489943-2"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-154489943-2', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://cuda.juliagpu.org/stable/installation/overview/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="CUDA.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">CUDA.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/introduction/">Introduction</a></li><li><a class="tocitem" href="../../tutorials/custom_structs/">Using custom structs</a></li></ul></li><li><span class="tocitem">Installation</span><ul><li class="is-active"><a class="tocitem" href>Overview</a><ul class="internal"><li><a class="tocitem" href="#Package-installation"><span>Package installation</span></a></li><li><a class="tocitem" href="#Platform-support"><span>Platform support</span></a></li><li><a class="tocitem" href="#NVIDIA-driver"><span>NVIDIA driver</span></a></li><li><a class="tocitem" href="#CUDA-toolkit"><span>CUDA toolkit</span></a></li><li><a class="tocitem" href="#Containers"><span>Containers</span></a></li></ul></li><li><a class="tocitem" href="../conditional/">Conditional use</a></li><li><a class="tocitem" href="../troubleshooting/">Troubleshooting</a></li></ul></li><li><span class="tocitem">Usage</span><ul><li><a class="tocitem" href="../../usage/overview/">Overview</a></li><li><a class="tocitem" href="../../usage/workflow/">Workflow</a></li><li><a class="tocitem" href="../../usage/array/">Array programming</a></li><li><a class="tocitem" href="../../usage/memory/">Memory management</a></li><li><a class="tocitem" href="../../usage/multitasking/">Tasks and threads</a></li><li><a class="tocitem" href="../../usage/multigpu/">Multiple GPUs</a></li></ul></li><li><span class="tocitem">Development</span><ul><li><a class="tocitem" href="../../development/profiling/">Profiling</a></li><li><a class="tocitem" href="../../development/troubleshooting/">Troubleshooting</a></li><li><a class="tocitem" href="../../development/debugging/">Debugging</a></li></ul></li><li><span class="tocitem">API reference</span><ul><li><a class="tocitem" href="../../api/essentials/">Essentials</a></li><li><a class="tocitem" href="../../api/compiler/">Compiler</a></li><li><a class="tocitem" href="../../api/kernel/">Kernel programming</a></li><li><a class="tocitem" href="../../api/array/">Array programming</a></li></ul></li><li><span class="tocitem">Library reference</span><ul><li><a class="tocitem" href="../../lib/driver/">CUDA driver</a></li></ul></li><li><a class="tocitem" href="../../faq/">FAQ</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Installation</a></li><li class="is-active"><a href>Overview</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Overview</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaGPU/CUDA.jl/blob/master/docs/src/installation/overview.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="InstallationOverview"><a class="docs-heading-anchor" href="#InstallationOverview">Overview</a><a id="InstallationOverview-1"></a><a class="docs-heading-anchor-permalink" href="#InstallationOverview" title="Permalink"></a></h1><p>The Julia CUDA stack requires users to have a functional <a href="https://www.nvidia.com/Download/index.aspx">NVIDIA driver</a> and corresponding <a href="https://developer.nvidia.com/cuda-downloads">CUDA toolkit</a>. The former should be installed by you or your system administrator, while the latter can be automatically downloaded by Julia using the artifact subsystem.</p><h2 id="Package-installation"><a class="docs-heading-anchor" href="#Package-installation">Package installation</a><a id="Package-installation-1"></a><a class="docs-heading-anchor-permalink" href="#Package-installation" title="Permalink"></a></h2><p>For most users, installing the latest tagged version of CUDA.jl will be sufficient. You can easily do that using the package manager:</p><pre><code class="nohighlight hljs">pkg&gt; add CUDA</code></pre><p>Or, equivalently, via the <code>Pkg</code> API:</p><pre><code class="language-julia hljs">julia&gt; import Pkg; Pkg.add(&quot;CUDA&quot;)</code></pre><p>In some cases, you might need to use the <code>master</code> version of this package, e.g., because it includes a specific fix you need. Often, however, the development version of this package itself relies on unreleased versions of other packages. This information is recorded in the manifest at the root of the repository, which you can use by starting Julia from the CUDA.jl directory with the <code>--project</code> flag:</p><pre><code class="nohighlight hljs">$ cd .julia/dev/CUDA.jl     # or wherever you have CUDA.jl checked out
$ julia --project
pkg&gt; instantiate            # to install correct dependencies
julia&gt; using CUDA</code></pre><p>In the case you want to use the development version of CUDA.jl with other packages, you cannot use the manifest and you need to manually install those dependencies from the master branch. Again, the exact requirements are recorded in CUDA.jl&#39;s manifest, but often the following instructions will work:</p><pre><code class="nohighlight hljs">pkg&gt; add GPUCompiler#master
pkg&gt; add GPUArrays#master
pkg&gt; add LLVM#master</code></pre><h2 id="Platform-support"><a class="docs-heading-anchor" href="#Platform-support">Platform support</a><a id="Platform-support-1"></a><a class="docs-heading-anchor-permalink" href="#Platform-support" title="Permalink"></a></h2><p>We support the same operation systems that NVIDIA supports: Linux, and Windows. Similarly, we support x86, ARM, PPC, ... as long as Julia is supported on it and there exists an NVIDIA driver and CUDA toolkit for your platform. The main development platform (and the only CI system) however is x86_64 on Linux, so if you are using a more exotic combination there might be bugs.</p><h2 id="NVIDIA-driver"><a class="docs-heading-anchor" href="#NVIDIA-driver">NVIDIA driver</a><a id="NVIDIA-driver-1"></a><a class="docs-heading-anchor-permalink" href="#NVIDIA-driver" title="Permalink"></a></h2><p>To use the Julia GPU stack, you need to install the NVIDIA driver for your system and GPU. You can find <a href="https://www.nvidia.com/Download/index.aspx">detailed instructions</a> on the NVIDIA home page.</p><p>If you&#39;re using Linux you should always consider installing the driver through the package manager of your distribution. In the case that driver is out of date or does not support your GPU, and you need to download a driver from the NVIDIA home page, similarly prefer a distribution-specific package (e.g., deb, rpm) instead of the generic runfile option.</p><p>If you are using a shared system, ask your system administrator on how to install or load the NVIDIA driver. Generally, you should be able to find and use the CUDA driver library, called <code>libcuda.so</code> on Linux, <code>libcuda.dylib</code> on macOS and <code>nvcuda64.dll</code> on Windows. You should also be able to execute the <code>nvidia-smi</code> command, which lists all available GPUs you have access to.</p><p>On some enterprise systems, CUDA.jl will be able to upgrade the driver for the duration of the session (using CUDA&#39;s Forward Compatibility mechanism). This will be mentioned in the <code>CUDA.versioninfo()</code> output, so be sure to verify that before asking your system administrator to upgrade:</p><pre><code class="nohighlight hljs">julia&gt; CUDA.versioninfo()
CUDA runtime 10.2
CUDA driver 11.8
NVIDIA driver 520.56.6, originally for CUDA 11.7</code></pre><p>Finally, to be able to use all of the Julia GPU stack you need to have permission to profile GPU code. On Linux, that means loading the <code>nvidia</code> kernel module with the <code>NVreg_RestrictProfilingToAdminUsers=0</code> option configured (e.g., in <code>/etc/modprobe.d</code>). Refer to the <a href="https://developer.nvidia.com/nvidia-development-tools-solutions-ERR_NVGPUCTRPERM-permission-issue-performance-counters">following document</a> for more information.</p><h2 id="CUDA-toolkit"><a class="docs-heading-anchor" href="#CUDA-toolkit">CUDA toolkit</a><a id="CUDA-toolkit-1"></a><a class="docs-heading-anchor-permalink" href="#CUDA-toolkit" title="Permalink"></a></h2><p>The recommended way to use CUDA.jl is to let it automatically download an appropriate CUDA toolkit. CUDA.jl will check your driver&#39;s capabilities, which versions of CUDA are available for your platform, and automatically download an appropriate artifact containing all the libraries that CUDA.jl supports.</p><p>If you <em>really</em> need to use a different CUDA toolkit, it&#39;s possible (but not recommended) to load a different version of the CUDA runtime, or even an installation from your local system. Both are configured by setting the <code>version</code> preference (using Preferences.jl) on the CUDA<em>Runtime</em>jll.jl package, but there is also a user-friendly API available in CUDA.jl.</p><h3 id="Specifying-the-CUDA-version"><a class="docs-heading-anchor" href="#Specifying-the-CUDA-version">Specifying the CUDA version</a><a id="Specifying-the-CUDA-version-1"></a><a class="docs-heading-anchor-permalink" href="#Specifying-the-CUDA-version" title="Permalink"></a></h3><p>You can choose which version to (try to) download and use by calling <code>CUDA.set_runtime_version!</code>:</p><pre><code class="nohighlight hljs">julia&gt; using CUDA

julia&gt; CUDA.set_runtime_version!(v&quot;11.8&quot;)
┌ Warning: CUDA Runtime version set to 11.8, please re-start Julia for this to take effect.
└ @ CUDA /usr/local/share/julia/packages/CUDA/irdEw/lib/cudadrv/version.jl:54</code></pre><p>This generates the following <code>LocalPreferences.toml</code> file in your active environment:</p><pre><code class="nohighlight hljs">[CUDA_Runtime_jll]
version = &quot;11.8&quot;</code></pre><p>This preference is compatible with other CUDA JLLs, e.g., if you load <code>CUDNN_jll</code> it will only select artifacts that are compatible with the configured CUDA runtime.</p><h3 id="Using-a-local-CUDA"><a class="docs-heading-anchor" href="#Using-a-local-CUDA">Using a local CUDA</a><a id="Using-a-local-CUDA-1"></a><a class="docs-heading-anchor-permalink" href="#Using-a-local-CUDA" title="Permalink"></a></h3><p>To use a local installation, you can invoke the same API but set the version to <code>&quot;local&quot;</code>:</p><pre><code class="nohighlight hljs">julia&gt; using CUDA

julia&gt; CUDA.versioninfo()
CUDA runtime 11.8, artifact installation
...

julia&gt; CUDA.set_runtime_version!(&quot;local&quot;)
┌ Warning: CUDA Runtime version set to local, please re-start Julia for this to take effect.
└ @ CUDA ~/Julia/pkg/CUDA/lib/cudadrv/version.jl:73</code></pre><p>After re-launching Julia:</p><pre><code class="nohighlight hljs">julia&gt; using CUDA

julia&gt; CUDA.versioninfo()
CUDA runtime 11.8, local installation
...</code></pre><p>Calling the above helper function generates the following <code>LocalPreferences.toml</code> file in your active environment:</p><pre><code class="nohighlight hljs">[CUDA_Runtime_jll]
version = &quot;local&quot;</code></pre><p>This preference not only configures CUDA.jl to use a local toolkit, it also prevents downloading any artifact, so it may be interesting to set this preference before ever importing CUDA.jl (e.g., by putting this preference file in a system-wide depot).</p><p>If CUDA.jl doesn&#39;t properly detect your local toolkit, it may be that certain libraries or binaries aren&#39;t on a globally-discoverable path. For more information, run Julia with the <code>JULIA_DEBUG</code> environment variable set to <code>CUDA_Runtime_Discovery</code>.</p><p>Note that setting the version to <code>&quot;local&quot;</code> disables use of <em>any</em> CUDA-related JLL, not just of <code>CUDA_Runtime_jll</code>. This is out of necessity: JLLs are baked in the precompilation image at compile time, while local toolkit discovery happens at run time; this inconsistency makes it impossible to select a compatible artifact for the JLLs. If you care about other JLLs, use CUDA from artifacts.</p><h2 id="Containers"><a class="docs-heading-anchor" href="#Containers">Containers</a><a id="Containers-1"></a><a class="docs-heading-anchor-permalink" href="#Containers" title="Permalink"></a></h2><p>CUDA.jl is container friendly: You can install, precompile, and even import the package on a system without a GPU:</p><pre><code class="nohighlight hljs">$ docker run --rm -it julia   # note how we&#39;re *not* using `--gpus=all` here,
                              # so we won&#39;t have access to a GPU (or its driver)

pkg&gt; add CUDA

pkg&gt; precompile
Precompiling project...
[ Info: Precompiling CUDA [052768ef-5323-5732-b1bb-66c8b64840ba]</code></pre><p>The above is common when building a container (<code>docker build</code> does not take a <code>--gpus</code> argument). It does prevent CUDA.jl from downloading the toolkit artifacts that will be required at run time, because it cannot query the driver for the CUDA compatibility level.</p><p>To avoid having to download the CUDA toolkit artifacts each time you restart your container, it&#39;s possible to inform CUDA.jl which toolkit to use. This can be done by calling <code>CUDA.set_runtime_version!</code> when building the container, after which a subsequent import of CUDA.jl will download the necessary artifacts.</p><p>At run time you obviously do need a CUDA-compatible GPU as well as the CUDA driver library to interface with it. Typically, that library is imported from the host system, e.g., by launching <code>docker</code> using the <code>--gpus=all</code> flag:</p><pre><code class="nohighlight hljs">$ docker run --rm -it --gpus=all julia

julia&gt; using CUDA

julia&gt; CUDA.versioninfo()
CUDA runtime 11.8
CUDA driver 11.8
NVIDIA driver 520.56.6

...</code></pre><p>All of the above is demonstrated in the Dockerfile that&#39;s part of the CUDA.jl repository.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../tutorials/custom_structs/">« Using custom structs</a><a class="docs-footer-nextpage" href="../conditional/">Conditional use »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 24 April 2023 17:29">Monday 24 April 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
